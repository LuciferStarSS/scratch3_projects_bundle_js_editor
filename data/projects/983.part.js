/* 983 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar connect = __webpack_require__(13).connect;\n\nvar previewActions = __webpack_require__(271);\nvar AddToStudioModal = __webpack_require__(915);\n\n// user can add project to studio if studio is open to all, or user is a curator of studio\nvar canAdd = function canAdd(studio, userIsCurator) {\n    return studio.open_to_all || userIsCurator;\n};\n\n// user can remove project from studio if user owns project or is admin or user is a curator of studio\nvar canRemove = function canRemove(userOwnsProject, isAdmin, userIsCurator) {\n    return userOwnsProject || isAdmin || userIsCurator;\n};\n\n// include a given studio in the list to show in add to studio modal.\n// only include it if user has the ability to remove the project from this studio.\nvar showStudio = function showStudio(studio, currentStudioIds, userIsCurator, userOwnsProject, isAdmin) {\n    var includesProject = currentStudioIds.indexOf(studio.id) !== -1;\n    var canAddToThisStudio = canAdd(studio, userIsCurator);\n    var canRemoveFromThisStudio = canRemove(userOwnsProject, isAdmin, userIsCurator);\n    if (canRemoveFromThisStudio) {\n        // power to remove matches set of studios we want to show\n        // include the current status of whether the project is in the studio,\n        // and what privileges the user has to change that.\n        var consolidatedStudio = Object.assign({}, studio, {\n            includesProject: includesProject,\n            canAdd: canAddToThisStudio,\n            canRemove: canRemoveFromThisStudio\n        });\n        return consolidatedStudio;\n    }\n    return null;\n};\n\n// Build consolidated curatedStudios object from all studio info.\n// We add flags to indicate whether the project is currently in the studio,\n// and the status of requests to join/leave studios.\nvar consolidateStudiosInfo = function consolidateStudiosInfo(userOwnsProject, isAdmin, curatedStudios, projectStudios, currentStudioIds, studioRequests) {\n\n    var consolidatedStudios = [];\n\n    // for each studio the project is in, include it if user can add or remove project from it.\n    projectStudios.forEach(function (projectStudio) {\n        var userIsCurator = curatedStudios.some(function (curatedStudio) {\n            return curatedStudio.id === projectStudio.id;\n        });\n        var studioToShow = showStudio(projectStudio, currentStudioIds, userIsCurator, userOwnsProject, isAdmin);\n        if (studioToShow) {\n            consolidatedStudios.push(studioToShow);\n        }\n    });\n\n    // for each curated studio, if it was not already added to consolidatedStudios above, add it now.\n    curatedStudios.forEach(function (curatedStudio) {\n        if (!projectStudios.some(function (projectStudio) {\n            return projectStudio.id === curatedStudio.id;\n        })) {\n            var studioToShow = showStudio(curatedStudio, currentStudioIds, true, userOwnsProject, isAdmin);\n            if (studioToShow) {\n                consolidatedStudios.push(studioToShow);\n            }\n        }\n    });\n\n    // set studio state to hasRequestOutstanding==true if it's being fetched,\n    // false if it's not\n    consolidatedStudios.forEach(function (consolidatedStudio) {\n        var id = consolidatedStudio.id;\n        consolidatedStudio.hasRequestOutstanding = id in studioRequests && studioRequests[id] === previewActions.Status.FETCHING;\n    });\n\n    return consolidatedStudios;\n};\n\nvar mapStateToProps = function mapStateToProps(state, ownProps) {\n    return {\n        studios: consolidateStudiosInfo(ownProps.userOwnsProject, ownProps.isAdmin, state.preview.curatedStudios, state.preview.projectStudios, state.preview.currentStudioIds, state.preview.status.studioRequests)\n    };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps() {\n    return {};\n};\n\nvar ConnectedAddToStudioModal = connect(mapStateToProps, mapDispatchToProps)(AddToStudioModal);\n\nmodule.exports = ConnectedAddToStudioModal;\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/preview/add-to-studio.jsx\n// module id = 983\n// module chunks = 0\n\n//# sourceURL=scratch:///./src/views/preview/add-to-studio.jsx?");

/***/ })