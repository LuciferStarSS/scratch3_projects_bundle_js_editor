/* 311 */\n (function(module, exports) {\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n/**\n * An effect on an AudioPlayer and all its SoundPlayers.\n */\nvar Effect = function () {\n \n  function Effect(audioEngine, audioPlayer, lastEffect) {\n    _classCallCheck(this, Effect);\n    this.audioEngine = audioEngine;\n    this.audioPlayer = audioPlayer;\n    this.lastEffect = lastEffect;\n    this.value = this.DEFAULT_VALUE;\n    this.initialized = false;\n    this.inputNode = null;\n    this.outputNode = null;\n    this.target = null;\n  }\n \n  _createClass(Effect, [{\n    key: \"getInputNode\",\n   \n    value: function getInputNode() {\n      if (this._isPatch) {\n        return this.inputNode;\n      }\n      return this.target.getInputNode();\n    }\n   \n  }, {\n    key: \"initialize\",\n    value: function initialize() {\n      throw new Error(\"\".concat(this.constructor.name, \".initialize is not implemented.\"));\n    }\n   \n  }, {\n    key: \"_set\",\n    value: function _set() {\n      throw new Error(\"\".concat(this.constructor.name, \"._set is not implemented.\"));\n    }\n   \n  }, {\n    key: \"set\",\n    value: function set(value) {\n      \n      if (!this.initialized) {\n        this.initialize();\n      } \n      var wasPatch = this._isPatch;\n      if (wasPatch) {\n        this._lastPatch = this.audioEngine.currentTime;\n      } \n      this._set(value); \n      \n      if (this._isPatch !== wasPatch && this.target !== null) {\n        this.connect(this.target);\n      }\n    }\n   \n  }, {\n    key: \"update\",\n    value: function update() {}\n   \n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.set(this.DEFAULT_VALUE);\n    }\n   \n  }, {\n    key: \"connect\",\n    value: function connect(target) {\n      var _this = this;\n      if (target === null) {\n        throw new Error('target may not be null');\n      }\n      var checkForCircularReference = function checkForCircularReference(subtarget) {\n        if (subtarget) {\n          if (subtarget === _this) {\n            return true;\n          }\n          return checkForCircularReference(subtarget.target);\n        }\n      };\n      if (checkForCircularReference(target)) {\n        throw new Error('Effect cannot connect to itself');\n      }\n      this.target = target;\n      if (this.outputNode !== null) {\n        this.outputNode.disconnect();\n      }\n      if (this._isPatch || this._lastPatch + this.audioEngine.DECAY_DURATION < this.audioEngine.currentTime) {\n        this.outputNode.connect(target.getInputNode());\n      }\n      if (this.lastEffect === null) {\n        if (this.audioPlayer !== null) {\n          this.audioPlayer.connect(this);\n        }\n      } else {\n        this.lastEffect.connect(this);\n      }\n    }\n   \n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.inputNode = null;\n      this.outputNode = null;\n      this.target = null;\n      this.initialized = false;\n    }\n  }, {\n    key: \"name\",\n    get: function get() {\n      throw new Error(\"\".concat(this.constructor.name, \".name is not implemented\"));\n    }\n   \n  }, {\n    key: \"DEFAULT_VALUE\",\n    get: function get() {\n      return 0;\n    }\n   \n  }, {\n    key: \"_isPatch\",\n    get: function get() {\n      return this.initialized && (this.value !== this.DEFAULT_VALUE || this.audioPlayer === null);\n    }\n  }]);\n  return Effect;\n}();\nmodule.exports = Effect;\n })