/* 1237 */\n (function(module, exports, __webpack_require__) {\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\nvar log = __webpack_require__(229);\n/**\n * A symbol indicating all targets are to be effected.\n * @const {string}\n */\nvar ALL_TARGETS = '*';\nvar SoundBank = function () {\n \n  function SoundBank(audioEngine, effectChainPrime) {\n    _classCallCheck(this, SoundBank);\n   \n    this.audioEngine = audioEngine;\n   \n    this.soundPlayers = {};\n   \n    this.playerTargets = new Map();\n   \n    this.soundEffects = new Map();\n   \n    this.effectChainPrime = effectChainPrime;\n  }\n \n  _createClass(SoundBank, [{\n    key: \"addSoundPlayer\",\n    value: function addSoundPlayer(soundPlayer) {\n      this.soundPlayers[soundPlayer.id] = soundPlayer;\n    }\n   \n  }, {\n    key: \"getSoundPlayer\",\n    value: function getSoundPlayer(soundId) {\n      if (!this.soundPlayers[soundId]) {\n        log.error(\"SoundBank.getSoundPlayer(\".concat(soundId, \"): called missing sound in bank\"));\n      }\n      return this.soundPlayers[soundId];\n    }\n   \n  }, {\n    key: \"getSoundEffects\",\n    value: function getSoundEffects(sound) {\n      if (!this.soundEffects.has(sound)) {\n        this.soundEffects.set(sound, this.effectChainPrime.clone());\n      }\n      return this.soundEffects.get(sound);\n    }\n   \n  }, {\n    key: \"playSound\",\n    value: function playSound(target, soundId) {\n      var effects = this.getSoundEffects(soundId);\n      var player = this.getSoundPlayer(soundId);\n      if (this.playerTargets.get(soundId) !== target) {\n        \n        \n        player.stop();\n      }\n      this.playerTargets.set(soundId, target);\n      effects.addSoundPlayer(player);\n      effects.setEffectsFromTarget(target);\n      player.connect(effects);\n      player.play();\n      return player.finished();\n    }\n   \n  }, {\n    key: \"setEffects\",\n    value: function setEffects(target) {\n      var _this = this;\n      this.playerTargets.forEach(function (playerTarget, key) {\n        if (playerTarget === target) {\n          _this.getSoundEffects(key).setEffectsFromTarget(target);\n        }\n      });\n    }\n   \n  }, {\n    key: \"stop\",\n    value: function stop(target, soundId) {\n      if (this.playerTargets.get(soundId) === target) {\n        this.soundPlayers[soundId].stop();\n      }\n    }\n   \n  }, {\n    key: \"stopAllSounds\",\n    value: function stopAllSounds() {\n      var _this2 = this;\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ALL_TARGETS;\n      this.playerTargets.forEach(function (playerTarget, key) {\n        if (target === ALL_TARGETS || playerTarget === target) {\n          _this2.getSoundPlayer(key).stop();\n        }\n      });\n    }\n   \n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.playerTargets.clear();\n      this.soundEffects.forEach(function (effects) {\n        return effects.dispose();\n      });\n      this.soundEffects.clear();\n      for (var soundId in this.soundPlayers) {\n        if (this.soundPlayers.hasOwnProperty(soundId)) {\n          this.soundPlayers[soundId].dispose();\n        }\n      }\n      this.soundPlayers = {};\n    }\n  }]);\n  return SoundBank;\n}();\nmodule.exports = SoundBank;\n })